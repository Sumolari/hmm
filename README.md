[![NPM version][npm-image]][npm-url]
[![Build status][travis-image]][travis-url]
[![Test coverage][coveralls-image]][coveralls-url]
[![License][license-image]][license-url]
[![Downloads][downloads-image]][downloads-url]

This module implements a **Hidden Markov Model** featuring methods to obtain the real generation probability and Viterbi approximations as well as methods to initialize and/or reestimate a HMM given a set of generated items with Viterbi re-estimation and linear segmentation.

# Dependencies

Implementation itself depends on **no additional module**.

# Usage

This project can be used as a NodeJS module:

```javascript
var hmm = require( './hmm.js' );
var aModel = new hmm();
```

## Initializing with explicit details

A Hidden Markov Model can be initialized giving the explicit list of states (including final state), symbols, initial probabilities, transition probabilities and emission probabilities.

```javascript
aModel = new hmm(
	[ '1', '2', '3', 'F' ],
	'F', [ 'a', 'b', 'c' ], {
		'1': 1
	}, {
		'1': {
			'1': 0.2,
			'2': 0.5,
			'3': 0.3
		},
		'2': {
			'1': 0.1,
			'3': 0.9
		},
		'3': {
			'3': 0.4,
			'F': 0.6
		}
	}, {
		'1': {
			'b': 0.3,
			'c': 0.7
		},
		'2': {
			'a': 0.3,
			'b': 0.6,
			'c': 0.1
		},
		'3': {
			'a': 1,
		}
	}
);
```

## Reestimating an existing Hidden Markov Model

If you have an existing HMM and want to reestimate it with some training samples you can do it with `reestimate` method:

```javascript
aModel.reestimate( [ [ 'b', 'c', 'b', 'a' ], [ 'b', 'c', 'b', 'b' ], [ 'b', 'c', 'b', 'd' ] ] );

```

Optionally you can give an array of optimal paths as second parameter. If you don't give that array of paths the method will compute the optimal paths for each one of given items, so be sure that given items could be generated with the model.

## Initializing a new Hidden Markov Model given some training samples

To initialize a new Hidden Markov Model without having a previous model you can use `initialize` method:

```javascript
aModel.initialize( [ [ 'b', 'c', 'b', 'a' ], [ 'b', 'c', 'b', 'b' ], [ 'b', 'c', 'b', 'd' ] ], 3 );
```

This method will initialize the model, using linear segmentation to decide which will be the optimal state sequence for each one of the items and after that will reestimate the model.

## Getting the probability that a given item is generated by the model

This implementation offers methods to get the real generation probability (using Forward algorithm), the Viterbi approximation and the most probable state sequence.

* **Real probability**: Given an array of symbols, `generationProbability` method will return the probability that those symbols are generated in that order by the model.
* **Viterbi approximation**: Given an array of symbols, `viterbiApproximation` method will return the probability that most probable state sequence generates given symbols in given order.
* **Most probable state sequence**: Given an array of symbols, `optimalStateSequence` will return the most probable state sequence as an array.

```javascript
var hmm = require( './hmm.js' );
var milk = new hmm();
var something = [ 'white', 'bottle' ];
milk.initialize( [ something ], 2 );
console.log( 'The probability that something white in a bottle is milk is ' +  ( milk.generationProbability( something ) * 100 ) + '%.' );
```

## Printing the model

You can check internal details of the model with `print` method, which will print details on console:

```bash
> milk.print();
A	1	2	F
1	0	1	0
2	0	0	1
F	0	0	0

B	white	bottle
1	1	0
2	0	1

Initial:
1:	1
2:	0
F:	0

Final: F
```

# Development

You'll need to install development dependencies:

```bash
npm install --only=dev
```

## Generating documentation

Documentation can be generated running:

```bash
npm run-script doc
```

HTML documentation will be available in `doc` folder.

## Building from Coffeescript source

Although this module is shipped already built you can build it again from CoffeeScript sources running:

```bash
npm run-script prepublish
```

## Running tests

You can also run the tests and get coverage information. To run the tests on CoffeeScript source just run:

```bash
npm test
```

If you want to generate additional coverage information run:

```bash
npm run-script test-cov
```

And then you'll find coverage information in `coverage` folder.

[npm-image]: https://img.shields.io/npm/v/HiddenMarkovModel.svg?style=flat-square
[npm-url]: https://npmjs.org/package/HiddenMarkovModel
[travis-image]: https://img.shields.io/travis/Sumolari/hmm.svg?style=flat-square
[travis-url]: https://travis-ci.org/Sumolari/hmm
[coveralls-image]: https://img.shields.io/coveralls/Sumolari/hmm.svg?style=flat-square
[coveralls-url]: https://coveralls.io/r/Sumolari/hmm
[license-image]: http://img.shields.io/npm/l/HiddenMarkovModel.svg?style=flat-square
[license-url]: https://opensource.org/licenses/MIT
[downloads-image]: http://img.shields.io/npm/dm/HiddenMarkovModel.svg?style=flat-square
[downloads-url]: https://npmjs.org/package/HiddenMarkovModel